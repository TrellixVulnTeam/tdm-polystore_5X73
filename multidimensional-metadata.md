
# Understanding Non-scalar sensor data in the TDM polystore

Non-scalar (or multi-dimensional) Sources are defined by the fact that they
define a non-empty `shape` vector, which represents the shape of each array
element in the time series generated by the Source.

An example of a non-scalar source is a weather radar, which could generate a time
series of 2D precipitation maps; another is a weather simulation, which could
generate a time series of 3D snapshots of a weather model.
 

## Specific source metadata

The general metadata [defined for all
Sources](metadata.md#general-source-schema) defined for all sources is
of course valid for non-scalar sources.  In addition, we define the following
properties that are specific to non-scalar sources.

### Field name: `geomapping`

To be determined.


## Registered multi-dimensional sources


### Radar UNICA

* `entity_category`: Radar
* `entity_type`: MeteoRadar
* controlledProperties:
  - `L`: Massa d'acqua (unit√† sconosciute)
  - `A`: alpha channel; maschera che serve per indicare zone della matrice da ignorare.


### Mosaico DPC

Data from the [radar mosaic service] provided by the Dipartimento di Protezione
Civile

* `entity_category`: Radar
* `entity_type`: MeteoRadarMosaic
* `controlledProperties`:
  - `TEMP`
  - `VMI`
  - `SRT`
  - `DPC-IR`
  - `LTG`
  - `WIND-AMV`
  - `DPC-HRD`

[radar mosaic service]: http://www.protezionecivile.gov.it/attivita-rischi/meteo-idro/attivita/previsione-prevenzione/centro-funzionale-centrale-rischio-meteo-idrogeologico/monitoraggio-sorveglianza/mappa-radar

## Example multidimensional source object

```
{
    "tdmq_id": "e56cadc0-784d-11eb-b15c-b3e425d12b70",
    "id": "dpc/meteomosaic",
    "alias": "Mosaic of dpc meteo radars",
    "entity_category": "Radar",
    "entity_type": "MeteoRadarMosaic",
    "stationary": true,
    "public": true,
    "controlledProperties": [
        "VMI",
        "SRI"
    ],
    "shape": [
        1400,
        1200
    ],
    "default_footprint": {
        "coordinates": [
            [
                [ 4.537000517753033, 47.856095810774605 ],
                [ 4.537000517753033, 35.07686201381699 ],
                [ 20.436762466677894, 35.07686201381699 ],
                [ 20.436762466677894, 47.856095810774605 ],
                [ 4.537000517753033, 47.856095810774605 ]
            ]
        ],
        "type": "Polygon"
    },
    "geomapping": {
        "SRID": "EPSG:4326",
        "grid": { "xsize": 1200, "ysize": 1400 },
        "ModelTransformation": [
            [ 0.013249801624104052, 0.0,                   0.0, 4.537000517753033  ],
            [ 0.0,                  -0.009128024140684008, 0.0, 47.856095810774605 ],
            [ 0.0,                  0.0,                   0.0, 0.0                ],
            [ 0.0,                  0.0,                   0.0, 1.0                ]
        ]
    },
    "description": {
        "brand_name": "DPC",
        "model_name": "dpc-radar-mosaic-precipitation",
        "operated_by": "Dipartimento Protezione Civile",
        "reference": "http://www.protezionecivile.gov.it/attivita-rischi/meteo-idro/attivita/previsione-prevenzione/centro-funzionale-centrale-rischio-meteo-idrogeologico/monitoraggio-sorveglianza/mappa-radar"
    }
}
```
