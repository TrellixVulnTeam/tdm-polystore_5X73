FROM python:3.7
COPY ./tdmq-dist /tdmq-dist
COPY web-entrypoint.sh /
WORKDIR /tdmq-dist
RUN chmod +x /web-entrypoint.sh
RUN pip install --upgrade pip && \
  pip install flask gunicorn pytest sphinx sphinxcontrib-httpdomain && \
  pip install -e .
EXPOSE 8000
WORKDIR /tdmq-dist/tdmq
CMD /web-entrypoint.sh
